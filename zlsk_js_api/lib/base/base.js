!function(t,n,e){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(void 0==n.SFM&&(n.SFM={}),n.SFM.Base=t())}(function(){var t=function(){};return t.extend=function(n,e){var o=t.prototype.extend;t._prototyping=!0;var i=new this;o.call(i,n),i.base=function(){},delete t._prototyping;var r=i.constructor,u=i.constructor=function(){if(!t._prototyping)if(this._constructing||this.constructor==u)this._constructing=!0,r.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||o).call(arguments[0],i)};return u.ancestor=this,u.extend=this.extend,u.forEach=this.forEach,u.implement=this.implement,u.prototype=i,u.toString=this.toString,u.valueOf=function(t){return"object"==t?u:r.valueOf()},o.call(u,e),"function"==typeof u.init&&u.init(),u},t.prototype={extend:function(n,e){if(arguments.length>1){var o=this[n];if(o&&"function"==typeof e&&(!o.valueOf||o.valueOf()!=e.valueOf())&&/\bbase\b/.test(e)){var i=e.valueOf();(e=function(){var n=this.base||t.prototype.base;this.base=o;var e=i.apply(this,arguments);return this.base=n,e}).valueOf=function(t){return"object"==t?e:i},e.toString=t.toString}this[n]=e}else if(n){var r=t.prototype.extend;t._prototyping||"function"==typeof this||(r=this.extend||r);for(var u={toSource:null},f=["constructor","toString","valueOf"],s=t._prototyping?0:1;c=f[s++];)n[c]!=u[c]&&r.call(this,c,n[c]);for(var c in n)u[c]||r.call(this,c,n[c])}return this}},t=t.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,n,e){for(var o in t)void 0===this.prototype[o]&&n.call(e,t[o],o,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}})},window);
