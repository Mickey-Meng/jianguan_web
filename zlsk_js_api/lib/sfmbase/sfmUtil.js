!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define([],e):(null==t.SFM&&(t.SFM={}),t.SFM.sfmUtil=e())}(function(){var e={},n={},a={w:"width",h:"height",W:"Width",H:"Height",l:"left",r:"right",t:"top",b:"bottom",L:"Left",R:"Right",T:"Top",B:"Bottom",m:"margin",p:"padding",o:"border"},t=null;window._fLoadUrl||(window._fLoadUrl={});for(var r=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],i={},o=0;o<r.length;o++){var l=r[o];i["[object "+l+"]"]=l.toLowerCase()}function s(e,t,n){try{var r=t.split("."),i=e=e||{},a=0;for(a=0;a<r.length-1;a++)i[r[a]]||(i[r[a]]={}),i=i[r[a]];return void 0!==n&&(i[r[a]]=n),i[r[a]]}catch(e){}}function u(e,t,n){try{if(!e)return n;var r=s(e,t);return void 0===r?n:r}catch(e){return n}}function c(e,t){for(var n="",r=0;r<t.length;r++)n+=a[t[r].toLowerCase()]+"-";n=n.substr(0,n.length-1);var i=parseFloat(e.css(n));return isNaN(i)?0:i}function f(){for(var e=arguments[0],t=0,n=1;n<arguments.length;n++)t+=c(e,arguments[n]);return t}var d;d=function(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/x/g,function(e){return(16*Math.random()|0).toString(16)})};function p(e){var t=(e||window).location.href;return t=(t=t.split("/"))[0]+"//"+t[2]+"/"}function m(e){var t=v(),n=(e||window).location.href,r=(n=n.split("/"))[0]+"//"+n[2],i=t.ROOT_PATH_SEG_NUM;null==i&&(i=1);for(var a=0;a<i;a++)r+="/"+n[a+3];return r}function g(){var e=v(),t=e.ZLSK_JS_API_URL;return t=null==t?p(e):0==t.indexOf("${HOSTURL}")?t.replace(/\${HOSTURL}/g,m(e)+"/"):t,t+="zlsk_js_api"}function h(e){if(!window._fLoadUrl[e]){var t="";t=-1<e.indexOf(".css")?"<link type='text/css' rel='stylesheet' href='"+e+"'></link>":"<script type='text/javascript' src='"+e+"'><\/script>",document.write(t),window._fLoadUrl[e]=1}}function b(e,t,n){if(window._fLoadUrl[e])"function"==typeof n&&n();else{var r=null;-1<e.indexOf(".css")?((r=document.createElement("link")).type="text/css",r.rel="stylesheet",r.href=e):((r=document.createElement("script")).type="text/javascript",r.src=e),"function"==typeof n&&(r.onload=n),document.getElementsByTagName(t||"head").item(0).appendChild(r),window._fLoadUrl[e]=1}}function j(){for(var e=arguments,t=m(v()),n=0;n<e.length;n++){h(t+e[n])}}function y(){for(var e=arguments,t=g(),n=0;n<e.length;n++){h(t+e[n])}}var v=function(e){return e=e||window,t||(e==top||e.SFM&&e.SFM.fSfmMain)&&(t=e)||v(e.parent)},x=function(){var e="/lib/sfmbase/";SFM.fSfmMain&&y("/lib/base/lab.js"),y("/lib/base/underscore.js","/lib/base/base.js",e+"sfmUtil.js",e+"sfmEvent.js",e+"sfmModuleBase.js",e+"sfmDataManager.js",e+"sfmModuleManager.js",e+"sfmAppBase.js",e+"sfmContainerBase.js",e+"sfmFloatContainerBase.js",e+"sfmTabContainerBase.js",e+"sfmMenuBase.js",e+"sfmToolbarBase.js",e+"sfmWidgetBase.js",e+"sfmResizableWidgetBase.js","/style/sfmCommon.css")};n._loadOl2=function(){y("/lib/OpenLayers/proj4js-compressed.js","/lib/OpenLayers/OpenLayers.js")},n._loadOl2Ex=function(){y("/lib/OpenLayers/plottingSymbols.js")};return e.attr=s,e.valueOrDefault=u,e.vod=function(e,t,n){if(arguments.length<3||!n)return t;for(var r=n instanceof Array?n:[n],i=e instanceof Array?e:[e],a=0;a<r.length;a++)if(r[a])for(var o=0;o<i.length;o++)if(null!=r[a][i[o]])return r[a][i[o]];return t},e.firstByKey=function(e,t,n){if(!e)return null;for(var r=0;r<e.length;r++){if(u(e[r],t,null)==n)return e[r]}return null},e.findByKey=function(e,t,n){var r=[];if(!e)return r;for(var i=0;i<e.length;i++){u(e[i],t,null)==n&&r.push(e[i])}return r},e.isArray=function(){return"[object Array]"===Object.prototype.toString.call(obj)},e.fixNum=function(t,e,n){try{var r=t.toFixed(e);return n&&0<=r.indexOf(".")&&(r=r.replace(/0+$/gi,"").replace(/\.+$/gi,"")),r}catch(e){return t}},e.css2num=c,e.calcStyle=f,e.calcWidth=function(e){return f(e,"w","mL","mR","oLW","oRW","pL","pR")},e.calcHeight=function(e){return f(e,"h","mT","mB","oTW","oBW","pT","pB")},e.trimLeft=function(e,t){if(null==e)return e;null==t&&(t=" ");var n="^"+t+"+";return e.replace(new RegExp(n,"g"),"")},e.trimRight=function(e,t){if(null==e)return e;null==t&&(t=" ");var n=t+"+$";return e.replace(new RegExp(n,"g"),"")},e.trim=function(e,t){if(null==e)return e;null==t&&(t=" ");var n="(^"+t+"+)|("+t+"+$)";return e.replace(new RegExp(n,"g"),"")},e.fguid=d,e.date2Str=function(e){if(!e)return"";var t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return t+"-"+(n=(n+=1)<10?"0"+n:n)+"-"+(r=r<10?"0"+r:r)+" "+(i=i<10?"0"+i:i)+":"+(a=a<10?"0"+a:a)+":"+(o=o<10?"0"+o:o)},e.str2Date=function(e){try{if(!e)return null;var t=(e=e.replace(/[-:\/]+/gi," ")).split(" ");t[1]=parseInt(t[1])-1;for(var n=3;n<6;n++)null==t[n]&&(t[n]=0);return new Date(t[0],t[1],t[2],t[3],t[4],t[5])}catch(e){return null}},e.enDay2CnStr=function(e){var t="";switch(e){case 0:t="日";break;case 1:t="一";break;case 2:t="二";break;case 3:t="三";break;case 4:t="四";break;case 5:t="五";break;case 6:t="六";break;default:t=""}return t},e.getMainWin=v,e.getHost=p,e.getHostUrl=m,e.getApiUrl=g,e.getUrlParams=function(e){var t=(e||window).location.href.split("?");if(1<t.length){t=(t=t[1]).split("&");for(var n={},r=0;r<t.length;r++){var i=t[r].split("=");2==i.length&&(n[i[0]]=i[1])}return n}return null},e.loadUrl=h,e.appendUrl=b,e.load=j,e.loadApi=y,e.appendUrlToHead=function(){for(var e=arguments,t=m(v()),n=0;n<e.length;n++){b(t+e[n])}},e.loadMath=function(){y("/lib/util/sfmMathUtil.js")},e.loadJquery=function(){y("/lib/base/jquery.js")},e.loadUnderscore=function(){y("/lib/base/underscore.js")},e.loadSfmBase=function(){return x()},e.loadThemeStyle=function(e){j("/styles/themes/"+e+"/style.css")},e.loadArcgisApi=function(e,t){(e=e||window.ARCGIS_API_VERSION)||(e="3.23"),(t=t||window.ARCGIS_API_DIJIT_THEME)||(t="tundra");var n="/lib/arcgis_js_api/library/"+e+"/"+e+"/";y(n+"init.js",n+"esri/css/esri.css",n+"dijit/themes/"+t+"/"+t+".css")},e.loadCesium=function(e){(e=e||window.CESUIM_API_VERSION)||(e="1.66");var t="/lib/cesium/Cesium-"+e+"/";y(t+"Cesium.js",t+"Widgets/widgets.css","/lib/zlskearth/zlskearth.css","/lib/zlskearth/zlskearth.js","/lib/zlskearth/zlskEarthHelper.js")},e.loadEasyui=function(e){j("/lib/jquery/jquery.min.js","/lib/jquery/plugins/easyui/jquery.easyui.min.js","/lib/jquery/plugins/easyui/locale/easyui-lang-zh_CN.js","/styles/jquery/easyui/themes/"+(e||"default")+"/easyui.css","/styles/jquery/easyui/themes/icon.css")},e.loadBootstrap=function(){var e=window.BOOTSTRAP_VERSION||"3.3.7";j("/lib/bootstrap/bootstrap"+(e=e&&"-"+e)+".min.js","/styles/bootstrap/bootstrap"+e+".min.css")},e.loadProj4=function(){y("/lib/util/proj.js")},e.loadProjHelper=function(){y("/lib/util/proj.js","/lib/util/sfmProjHelper.js")},e.loadOpenLayers=function(e,t){(e=e||window.OPENLAYERS_VERSION)||(e=2),n["_loadOl"+e](),t&&n["_loadOl"+e+"Ex"]()},e.loadXMLStr=function(e){var t;try{if(window.ActiveXObject||window.ActiveXObject.prototype){for(var n=["Microsoft.XMLDOM","MSXML5.XMLDOM","MSXML.XMLDOM","MSXML2.XMLDOM","MSXML2.DOMDocument"],r=0;r<n.length;r++){(t=new ActiveXObject(n[r])).async=!1;break}/http/gi.test(e.substring(0,4))?t.load(e):t.loadXML(e)}else document.implementation&&document.implementation.createDocument?(t=document.implementation.createDocument("","",null)).loadXml(e):t=null}catch(e){t=null}return t},e},window);
