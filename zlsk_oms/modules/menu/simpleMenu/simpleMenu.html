<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <script type="text/javascript" src="../../../lib/sfmbase/sfmUtil.js"></script>
    <script type="text/javascript">
        SFM.sfmUtil.loadEasyui();
        SFM.sfmUtil.loadSfmBase();
    </script>
    <script type="text/javascript">
    SFM.SfmSimpleMenu = SFM.SfmMenuBase.extend({
        constructor: function(options){
            var me = this;
            me.base(options);
            me.addAction('setMenuName', me._setMenuName);
        },
        destroy: function(){
            $('.sfm-m-mi-box-lv1').off('click');
            this.removeAction('setMenuName');
            this.base();
        },
        render: function(){
            var me = this;
            me.el = $('body');
            me._renderMenus();
            me.base();
            return me;
        },

        _bindEvents: function(){
            var me = this;
            me.base();
            me._bindHoverEvents();
            return me;
        },

        _renderMenus: function(){
            var me = this;
            var menus = me.menu;
            var h1 = '';
            if(menus && menus.length > 0 && menus[0].children){
                var h1 = '<div class="sfm-m-menu-lv1-box">';
                for(var i = 0;i < menus[0].children.length;i++){
                    var mi = menus[0].children[i];
                    h1 += me._getMi1Html(mi);
                }
                h1 += '</div>';
            }
            $('#divMenuBox').html(h1);
        },
        _getMi1Html: function(mi){
            var h = '';
            if(mi){
                h += '<div id="' + mi.mid + '" class="sfm-f-mi-box sfm-m-mi-box sfm-m-mi-box-lv1">';
                if(mi.icon != null){
                    h += '<img src="' + mi.icon + '" class="sfm-m-mi-img" />';
                }
                h += '<div class="sfm-m-mi-text">' + mi.name + '</div>';
                h += '</div>';
            }
            return h;
        },
        _setMenuName: function(mk, name){
            var me = this;
            if(mk){
                var mi = me.menuMap[mk];
                if(mi){
                    var $md = me.el.find('#' + mi.mid);
                    me._setMiName($md, name);
                }
            }
            me.doAction('onSetMenuName', null, mk, name);
            return me;
        },
        _setMiName: function($mi, name){
            $mi.find('.sfm-m-mi-text').text(name);
            return this;
        },

        __className__: 'SfmSimpleMenu'
    });

    var simpleMenu = new SFM.SfmSimpleMenu({ctx: window});
    </script>
    <script type="text/javascript">
        simpleMenu.initConfig();
        $(function(){
            simpleMenu.render();
        });
    </script>
</head>

<body>
    <div id="divMenuBox" class="sfm-m-menu-box"></div>
    <!--<script type="text/javascript">
        var w=document.body.offsetWidth;
        var w1=(w-550)/2;
        $("#divMenuBox").css("marginLeft",w1);
     </script>-->
</body>

</html>
