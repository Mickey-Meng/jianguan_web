<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <script type="text/javascript" src="../../../lib/sfmbase/sfmUtil.js"></script>
    <script type="text/javascript">
        SFM.sfmUtil.loadEasyui();
        SFM.sfmUtil.loadSfmBase();
    </script>
    <script type="text/javascript">
    SFM.SfmOnelineMenu = SFM.SfmMenuBase.extend({
        constructor: function(options){
            var me = this;
            me.base(options);
        },
        destroy: function(){
            this.base();
        },
        render: function(){
            var me = this;
            me.el = $('body');
            me._renderMenus();
            var m = me.menu && me.menu[0];
            if(m){
                me.showMenu(m.mid);
            }
            me.base();
            return me;
        },
        showMenu: function(id){

        },

        _bindEvents: function(){
            var me = this;
            me.base();
            me._bindHoverEvents();
            return me;
        },

        _renderMenus: function(){
            var me = this;
            var menus = me.menu;
            var h1 = '';
            if(menus){
                for(var i = 0;i < menus.length;i++){
                    var mi = menus[i];
                    h1 += me._getMiHtml(mi);
                }
            }
            $('#divMenuBox').html(h1);
            var w = 0;
            $('.sfm-m-mi-box').each(function(){
                w += $(this).width() + 21;
            });
            $('#divMenuBox').width(w);
        },
        _getMiHtml: function(mi){
            var h = '';
            if(mi){
                var s = mi.disabled ? ' disabled="disabled"' : '';
                var acn = mi.actived ? ' sfm-f-active' : '';
                h += '<div id="' + mi.mid + '" class="sfm-m-mi-box' + acn + '" data-mk="' + (mi.mk || mi.id) + '"';
                if(mi.radioGroup){
                    h += ' data-rg="' + mi.radioGroup + '"';
                }
                h += s + '>';
                h += '<div class="sfm-m-mi-box-inner">';
                if(mi.icon != null){
                    h += '<img src="' + mi.icon + '" class="sfm-m-mi-img" />';
                }
                h += '<div id="' + mi.mid + '_t" class="sfm-m-mi-text">' + mi.name + '</div>';
                h += '</div>';
                h += '</div>';
            }
            return h;
        },

        __className__: 'SfmOnelineMenu'
    });

    var onelineMenu = new SFM.SfmOnelineMenu({ctx: window});
    </script>
    <script type="text/javascript">
        onelineMenu.initConfig();
        $(function(){
            onelineMenu.render();
        });
    </script>
</head>

<body>
    <div class="sfm-m-menu-wrapper">
    <div id="divMenuBox" class="sfm-m-menu-box"></div>
    </div>
</body>
</html>
