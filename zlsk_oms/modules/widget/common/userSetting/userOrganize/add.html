<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../../../../lib/ok_admin/css/oksub.css">
</head>

<body>
    <div class="ok-body">
        <!--form表单-->
        <form class="layui-form ok-form" lay-filter="filter">
            <div class="layui-form-item">
                <label class="layui-form-label">用户组名称</label>
                <div class="layui-input-block" id="serverInput">
                    <input type="text" name="userGroupName" placeholder="用户组名称" autocomplete="off" class="layui-input" lay-verify="required">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">用户组编码</label>
                <div class="layui-input-block">
                    <input type="text" name="userGroupCode" placeholder="用户组编码" autocomplete="off" class="layui-input" lay-verify="required">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="add">立即提交</button>
                </div>
            </div>
        </form>
    </div>
    <!--js逻辑-->
    <script type="text/javascript" src="../../../../../lib/ok_admin/lib/layui/layui.js"></script>
    <script>
    var $;
    var obj = null;
    function initForm(res) {
        var jsonString = JSON.stringify(res);
        obj = JSON.parse(jsonString);

    }
    layui.use(["element", "form", "laydate", "okLayer", "okUtils", 'constantUrl', 'tree', 'layer'], function() {
        $ = layui.jquery;
        var form = layui.form;
        var laydate = layui.laydate;
        var okLayer = layui.okLayer;
        var okUtils = layui.okUtils;
        var tree = layui.tree;
        var constantUrl = layui.constantUrl;
        var layer = layui.layer;
        if (obj != null) {
            form.val("filter", obj);

        }
        form.on("submit(add)", function(data) {
            var param = data.field;
            var url = constantUrl.stAuth.addUserOrganize;
            if (obj != null) {
                url = constantUrl.stAuth.updateUserOrganize;
                param.id = obj.id;
            }
            okUtils.ajax({ "url": url, "param": param, type: 'POST' }).done(function(response) {
                okLayer.msg.greenTick("添加成功", function() {
                    parent.parentFlag = 1;
                    parent.layer.close(parent.layer.getFrameIndex(window.name));
                });
            }).fail(function(error) {
                console.log(error)
            });
            return false;
        });
    });
    </script>
</body>

</html>
